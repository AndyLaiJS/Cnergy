{"remainingRequest":"/Users/andylai/Documents/Projects and Programs/swe/client/node_modules/thread-loader/dist/cjs.js!/Users/andylai/Documents/Projects and Programs/swe/client/node_modules/babel-loader/lib/index.js!/Users/andylai/Documents/Projects and Programs/swe/client/src/handler.js","dependencies":[{"path":"/Users/andylai/Documents/Projects and Programs/swe/client/src/handler.js","mtime":1585206265408},{"path":"/Users/andylai/Documents/Projects and Programs/swe/client/node_modules/cache-loader/dist/cjs.js","mtime":1585116422905},{"path":"/Users/andylai/Documents/Projects and Programs/swe/client/node_modules/thread-loader/dist/cjs.js","mtime":1585116426911},{"path":"/Users/andylai/Documents/Projects and Programs/swe/client/node_modules/babel-loader/lib/index.js","mtime":1585116422401}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN0cmluZy50cmltIjsKaW1wb3J0ICJyZWdlbmVyYXRvci1ydW50aW1lL3J1bnRpbWUiOwppbXBvcnQgX2FzeW5jVG9HZW5lcmF0b3IgZnJvbSAiL1VzZXJzL2FuZHlsYWkvRG9jdW1lbnRzL1Byb2plY3RzIGFuZCBQcm9ncmFtcy9zd2UvY2xpZW50L25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9hc3luY1RvR2VuZXJhdG9yIjsKaW1wb3J0IHsgaXNDdWhrRW1haWwsIGdldEVycm9yTWVzc2FnZSB9IGZyb20gIi4vdXRpbHMiOwppbXBvcnQgZmlyZWJhc2UgZnJvbSAiZmlyZWJhc2UvYXBwIjsKZXhwb3J0IGZ1bmN0aW9uIGhhbmRsZVNpZ25JbihfeCwgX3gyKSB7CiAgcmV0dXJuIF9oYW5kbGVTaWduSW4uYXBwbHkodGhpcywgYXJndW1lbnRzKTsKfQoKZnVuY3Rpb24gX2hhbmRsZVNpZ25JbigpIHsKICBfaGFuZGxlU2lnbkluID0gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlKGVtYWlsLCBwYXNzd29yZCkgewogICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUkKF9jb250ZXh0KSB7CiAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgc3dpdGNoIChfY29udGV4dC5wcmV2ID0gX2NvbnRleHQubmV4dCkgewogICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICBpZiAoIShlbWFpbC50cmltKCkgPT09ICIiKSkgewogICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAyOwogICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICB9CgogICAgICAgICAgICB0aHJvdyBFcnJvcigiRW1haWwgc2hvdWxkIG5vdCBiZSBlbXB0eSIpOwoKICAgICAgICAgIGNhc2UgMjoKICAgICAgICAgICAgaWYgKCEocGFzc3dvcmQgPT09ICIiKSkgewogICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSA0OwogICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICB9CgogICAgICAgICAgICB0aHJvdyBFcnJvcigiUGFzc3dvcmQgc2hvdWxkIG5vdCBiZSBlbXB0eSIpOwoKICAgICAgICAgIGNhc2UgNDoKICAgICAgICAgICAgaWYgKGlzQ3Voa0VtYWlsKGVtYWlsKSkgewogICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSA2OwogICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICB9CgogICAgICAgICAgICB0aHJvdyBFcnJvcigiUGxlYXNlIGVudGVyIGEgdmFsaWQgQ1VISyBlbWFpbCIpOwoKICAgICAgICAgIGNhc2UgNjoKICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LmFicnVwdCgicmV0dXJuIiwgbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkgewogICAgICAgICAgICAgIGZpcmViYXNlLmF1dGgoKS5zaWduSW5XaXRoRW1haWxBbmRQYXNzd29yZChlbWFpbCwgcGFzc3dvcmQpLnRoZW4oZnVuY3Rpb24gKHVzZXJDcmVkcykgewogICAgICAgICAgICAgICAgcmV0dXJuIHJlc29sdmUodXNlckNyZWRzKTsKICAgICAgICAgICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZXJyb3IpIHsKICAgICAgICAgICAgICAgIHJldHVybiByZWplY3QoZXJyb3IpOwogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9KSk7CgogICAgICAgICAgY2FzZSA3OgogICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LnN0b3AoKTsKICAgICAgICB9CiAgICAgIH0KICAgIH0sIF9jYWxsZWUpOwogIH0pKTsKICByZXR1cm4gX2hhbmRsZVNpZ25Jbi5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwp9CgpleHBvcnQgZnVuY3Rpb24gdXNlckhhc0xvZ2dlZEluKCkgewogIHZhciB1c2VyID0gZmlyZWJhc2UuYXV0aCgpLmN1cnJlbnRVc2VyOwoKICBpZiAodXNlcikgewogICAgcmV0dXJuIHRydWU7CiAgfQoKICByZXR1cm4gZmFsc2U7Cn0="},{"version":3,"sources":["/Users/andylai/Documents/Projects and Programs/swe/client/src/handler.js"],"names":["isCuhkEmail","getErrorMessage","firebase","handleSignIn","email","password","trim","Error","Promise","resolve","reject","auth","signInWithEmailAndPassword","then","userCreds","catch","error","userHasLoggedIn","user","currentUser"],"mappings":";;;;AAAA,SAASA,WAAT,EAAsBC,eAAtB,QAA6C,SAA7C;AACA,OAAOC,QAAP,MAAqB,cAArB;AAEA,gBAAsBC,YAAtB;AAAA;AAAA;;;0EAAO,iBAA4BC,KAA5B,EAAmCC,QAAnC;AAAA;AAAA;AAAA;AAAA;AAAA,kBACED,KAAK,CAACE,IAAN,OAAiB,EADnB;AAAA;AAAA;AAAA;;AAAA,kBAESC,KAAK,CAAC,2BAAD,CAFd;;AAAA;AAAA,kBAGEF,QAAQ,KAAK,EAHf;AAAA;AAAA;AAAA;;AAAA,kBAISE,KAAK,CAAC,8BAAD,CAJd;;AAAA;AAAA,gBAKGP,WAAW,CAACI,KAAD,CALd;AAAA;AAAA;AAAA;;AAAA,kBAMSG,KAAK,CAAC,iCAAD,CANd;;AAAA;AAAA,6CAQK,IAAIC,OAAJ,CAAY,UAACC,OAAD,EAAUC,MAAV,EAAqB;AACnCR,cAAAA,QAAQ,CAACS,IAAT,GACMC,0BADN,CACiCR,KADjC,EACwCC,QADxC,EAEMQ,IAFN,CAEW,UAACC,SAAD;AAAA,uBAAeL,OAAO,CAACK,SAAD,CAAtB;AAAA,eAFX,EAGMC,KAHN,CAGY,UAACC,KAAD;AAAA,uBAAWN,MAAM,CAACM,KAAD,CAAjB;AAAA,eAHZ;AAKJ,aANM,CARL;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,G;;;;AAiBP,OAAO,SAASC,eAAT,GAA2B;AAC7B,MAAIC,IAAI,GAAGhB,QAAQ,CAACS,IAAT,GAAgBQ,WAA3B;;AACA,MAAID,IAAJ,EAAU;AACL,WAAO,IAAP;AACJ;;AACD,SAAO,KAAP;AACJ","sourcesContent":["import { isCuhkEmail, getErrorMessage } from \"./utils\";\nimport firebase from \"firebase/app\";\n\nexport async function handleSignIn(email, password) {\n     if (email.trim() === \"\")\n          throw Error(\"Email should not be empty\")\n     if (password === \"\")\n          throw Error(\"Password should not be empty\")\n     if (!isCuhkEmail(email))\n          throw Error(\"Please enter a valid CUHK email\");\n\n     return new Promise((resolve, reject) => {\n          firebase.auth()\n               .signInWithEmailAndPassword(email, password)\n               .then((userCreds) => resolve(userCreds))\n               .catch((error) => reject(error)\n          );\n     });\n}\n\nexport function userHasLoggedIn() {\n     var user = firebase.auth().currentUser;\n     if (user) {\n          return true;\n     }\n     return false;\n}\n\n"]}]}